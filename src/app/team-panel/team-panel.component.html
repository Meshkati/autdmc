<div class="ui container">
    <div class="ui secondary pointing menu">
        <a class="item" (click)="menuState = 0" [ngClass]="{'active': menuState == 0}">
            سوالات
        </a>
        <a class="item" (click)="menuState = 1" [ngClass]="{'active': menuState == 1}">
            ارسال پاسخ
        </a>
        <a class="item" (click)="menuState = 2" [ngClass]="{'active': menuState == 2}">
            اطلاعات تیم
        </a>
        <div class="right menu">
            <a class="ui item" (click)="logout()">
                خروج
            </a>
        </div>
    </div>
    
    <div class="ui segment" *ngIf="menuState == 0">
        <h3 class="ui header">
            توضیحات
        </h3>
        <p>
            با شروع مسابقه، تیم ها می‌توانند در صفحه مربوط به تیم خود فایل task.zip را دانلود کنند که در آن توضیح مساله، داده ها و توضیحات مربوط به داده ها موجود است. از شرکت کنندگان انتظار می‌رود با استفاده از تکنیک های داده کاوی و یادگیری ماشین، مدل مناسبی برای پیش بینی متغیر هدف طراحی کنند.
            تیم ها تا قبل از پایان مسابقه فرصت دارند یک فایل csv با فرمتی که در توضیحات مساله شرح داده شده است، در صفحه تیم خود بارگذاری کنند. این فایل به عنوان پیش بینی های تیم شرکت کننده روی داده test در نظر گرفته خواهد شد و با مقادیر واقعی مقایسه و امتیاز تیم محاسبه خواهد شد. امکان بارگذاری مجدد وجود دارد، ولی فقط آخرین بارگذاری به عنوان پاسخ نهایی تیم در نظر گرفته خواهد شد.
        </p>
        
        <div class="ui primary button" (click)="downloadFile('AUT DMC 2017 - Task.pdf')">
            <i class="cloud download icon"></i>
            فایل تسک
        </div>
        <div class="ui primary button" (click)="downloadFile('AUT DMC 2017 - Features.pdf')">
            <i class="cloud download icon"></i>
            فایل ویژگی ها
        </div>
        <div class="ui primary button" (click)="downloadFile('data_v2.zip')">
            <i class="cloud download icon"></i>
            فایل دیتاها
        </div>
        <div class="ui info message">
            <h3 class="ui header">
                <i class="warning icon"></i>
                توجه
            </h3>
            <p>
                فایل دیتاها در تاریخ ۱۸ مهر بروز رسانی شد. لطفا از دیتاهای جدید استفاده نمایید.
            </p>
        </div>
    </div>
    
    <div class="ui segment submit-section" *ngIf="menuState == 1">
        <div class="ui warning message">
            <h4 class="header">
                توجه
            </h4>
            <p>
                حداکثر حجم فایل برای آپلود ۵۰ مگابایت است.
            </p>
            <p>
                آخرین فایلی که آپلود می‌کنید به عنوان جواب نهایی در نظر گرفته خواهد شد.
            </p>
            <p>
                مهلت ارسال پاسخ ها تا ۳ آبان ساعت ۱۸ خواهد بود.
            </p>
        </div>
        
        <label for="file" class="ui icon button" (click)="clearUploader()">
            <i class="file icon"></i>
            انتخاب فایل
        </label>
        <input id="file" type="file" ng2FileSelect [uploader]="uploader" style="display: none;" name="subFile"/>
        <div class="item-details" *ngIf="uploader.queue.length">
            <strong>{{ uploader.queue[0]?.file?.name }}</strong>
            - 
            <span nowrap>{{ uploader.queue[0]?.file?.size/1024/1024 | number:'.2' }} MB</span>
        </div>
        
        <div *ngIf="uploader.queue.length">
            <sui-progress [value]="uploader.progress" [showProgress]="uploader.progress" *ngIf="isUploading">
                {{ uploader.queue[0]?.isSuccess?'انجام شد':'در حال آپلود' }}
            </sui-progress>
            
            <div class="ui primary button" (click)="upload()" [ngClass]="{'loading': isUploading && !uploader.queue[0]?.isSuccess, 'disabled': isUploading}">
                <i class="cloud upload icon"></i>
                {{ uploader.queue[0]?.isSuccess?'انجام شد':'آپلود' }}
            </div>
        </div>

        <div class="ui negative message" *ngIf="errorMessage">
            <h4 class="header">
                خطا
            </h4>
            {{ errorMessage }}
        </div>
        <div class="ui divider"></div>
        <div *ngIf="submittionHistory" class="submittion-history">
            <h4 class="ui header">
                تاریخچه پاسخ های ارسال شده
            </h4>
            <table class="ui basic table">
                <thead>
                    <tr>
                        <th>نام فایل</th>
                        <th>تاریخ ثبت</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let submittion of submittionHistory">
                        <td>
                            {{ submittion.fileName }}
                        </td>
                        <td>
                            {{ submittion.uploadTime / 1000 | persianDate }}
                            {{ submittion.uploadTime / 1000 | hourMin }}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="ui segment" *ngIf="menuState == 2">
            <table class="ui celled table">
                <thead>
                    <tr>
                        <th>نام</th>
                        <th>ایمیل</th>
                        <th>تلفن</th>
                    </tr>
                </thead>
                
                <tbody>
                    <tr *ngFor="let member of team.user.members">
                        <td>
                            {{ member.name }}
                        </td>
                        <td>
                            {{ member.email }}
                        </td>
                        <td>
                            {{ member.number }}
                        </td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <th>
                            نام تیم:
                            {{ team.user.name }}
                        </th>
                        <th *ngIf="team.verification">
                            وضعیت پرداخت:
                            موفق
                        </th>
                        <th *ngIf="!team.verification">
                            وضعیت پرداخت:
                            انجام نشده
                        </th>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>